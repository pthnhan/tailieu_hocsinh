\documentclass[12pt,a4paper,twoside]{book}
\usepackage{amsmath,amssymb,yhmath,mathrsfs,fancyhdr,tkz-euclide,tikz-3dplot}
\usepackage{framed,tikz,tkz-tab,tkz-linknodes,pgfplots,currfile,enumerate,tasks,pifont}
\usetikzlibrary{shapes.geometric,arrows,calc,intersections,angles,patterns,snakes,shadings,quotes}
\usetkzobj{all}
\usepgfplotslibrary{fillbetween}
\pgfplotsset{compat=1.9}
\usepackage[top=2cm, bottom=2cm, left=3cm, right=1.5cm] {geometry}
\usepackage[hidelinks,unicode,pdfencoding=unicode, psdextra]{hyperref}
\usepackage[loigiai]{ex_test}

%\usepackage[dethi]{ex_test}
%CÁC GÓI, LỆNH VIẾT TẮT CẦN THÊM
%CẤU TRÚC TỰ LUẬN
\usepackage[most]{tcolorbox}
\newtheorem{bt}{\color{violet}Bài}
\newtheorem{vd}{\color{violet}Ví dụ}
\def\beginbox{\begin{tcolorbox}[drop fuzzy shadow southeast, enhanced, colback=red!5!white, colframe=red!75!black]}
	\def\endbox{\end{tcolorbox}}
\AtBeginEnvironment{vd}{
	\beginbox
	\renewcommand{\loigiai}[1]{
		\renewcommand{\immini}[2]{
			\setbox\imbox=\vbox{\hbox{##2}}
			\widthimmini=\wd\imbox
			\IMleftright{##1}{##2}
		}
		\endbox
		\begin{onlysolution}
			#1
		\end{onlysolution}
		\def\endbox{}
	}
}
\AtEndEnvironment{vd}{
	\endbox
}
\newtcolorbox[auto counter]{dang}[1]{
	drop fuzzy shadow southeast, breakable, enhanced, colback=red!5!white, colframe=red!75!black,
	title={\bf Dạng~\thetcbcounter.\ #1}
	%\addcontentsline{toc}{subsubsection}{Dạng~\thetcbcounter. #1}
}
\renewtheorem{ex}{\color{violet}Câu}
\theorembodyfont{\it}
\newtheorem{dl}{Định lí}
\theoremseparator{.}
\theorembodyfont{\rm}
\newtheorem{hq}{Hệ quả}
\newtheorem{tc}{Tính chất}
\newtheorem{dn}{Định nghĩa}
\theoremstyle{nonumberplain}
\newtheorem{kn}{Khái niệm}
\theoremseparator{}
\theorembodyfont{\it}
\usepackage{stackengine}
\usepackage{scalerel}
\newcommand\dangersign[1][2ex]{%
	\renewcommand\stacktype{L}%
	\scaleto{\stackon[1.3pt]{\color{red}$\triangle$}{\fontsize{4}{0}\selectfont !}}{#1}%
}
\newtheorem{note}{{\dangersign[3ex]}}
%Tiêu đề chương
\setcounter{tocdepth}{4}
\setcounter{secnumdepth}{4}
\usepackage{titlesec}
\makeatletter
\renewcommand\thesection{\@arabic\c@section.}
\renewcommand\thesubsection{\thesection\@arabic\c@subsection.}
\renewcommand\thesubsubsection{\thesubsection\@arabic\c@subsubsection.}
\makeatother
\titleformat{\section}{\selectfont\color{red!50!blue}\centering\scshape\Large\bfseries}{\sc \S \thesection}{0em}{
	\setcounter{vd}{0}
	\setcounter{ex}{0}
	\setcounter{vd}{0}
	\setcounter{dl}{0}
	\setcounter{dn}{0}
	\setcounter{hq}{0}
	\setcounter{tc}{0}
	\setcounter{\tcbcounter}{0}
}
%HẾT CẤU TRÚC TỰ LUẬN
\renewcommand{\vec}[1]{\protect\overrightarrow{#1}}
\newcommand{\hoac}[1]{\left[\begin{aligned}#1\end{aligned}\right.}
\newcommand{\heva}[1]{\left\{\begin{aligned}#1\end{aligned}\right.}
\renewcommand{\labelenumi}{\alph{enumi})}

% Định dạng nhóm LaTeX
\newcommand{\cbox}[1]{\tikz[baseline=(char.base)]{\node[shape=circle,draw,inner sep=0.8pt] (char) {\bf #1};}}
\renewcommand{\TrueEX}{\stepcounter{dapan}{{\color{red}\cbox{\textbf{\Alph{dapan}}}} \ignorespaces}}
%\renewcommand{\TrueEX}{\stepcounter{dapan}{{\color{blue}\cbox{\textbf{\Alph{dapan}}}} \ignorespaces}} %Không tô đỏ đáp án đúng.

\renewcommand{\FalseEX}{\stepcounter{dapan}{{\color{blue}\cbox{\textbf{\Alph{dapan}}}} \ignorespaces}}
\everymath{\displaystyle}
\begin{document}
\tableofcontents

\chapter{KHỐI ĐA DIỆN}
	\setcounter{section}{0}
	\input{HH/12H1-TL-1}
	%\newpage\input{HH/12H1-TL-2}
	\newpage\input{HH/12H1-TL-3}
	\newpage\input{HH/12H1-TL-KT}

\chapter{KHỐI TRÒN XOAY}
	\setcounter{section}{0}
	\input{HH/12H2-TL-1-2}

\chapter{PHƯƠNG PHÁP TỌA ĐỘ TRONG KHÔNG GIAN}
	\setcounter{section}{0}
	\input{HH/12H3-TL-1}
	\newpage\input{HH/12H3-TL-2}
	\newpage\input{HH/12H3-TL-3}
	\newpage\input{HH/12H3-TL-KT}
\end{document}
