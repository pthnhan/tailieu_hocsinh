
	
\section{Liên tục trong rời rạc}
%\begin{center}\textbf{\color{violet}{Nguyễn Hữu Điển (Hà Nội)}}\end{center}
\subsection{Mở đầu}	
\noindent Trong chương này, ta sẽ xét những bài toán rời rạc mà lời giải của chúng đều dựa vào một ý tưởng "liên tục" rất đơn giản như sau: \textit{Một con ếch ngồi trên điểm nguyên âm và nhảy tới một điểm nguyên dương trên trục số, mỗi bước nhảy có độ dài $0$ hoặc $1$. Thế thì sẽ có một thời điểm nào đó mà nó nhảy vào gốc của trục số.}

\noindent Ý tưởng này có thể mở rộng một chút bằng cách thay đổi độ dài các bước nhảy của con ếch thành một số thực không âm không vượt quá $1$. Khi ấy theo suy luận trên thì sẽ có một lúc nào đấy mà con ếch ngồi trong đoạn $[0,1]$. Hai đối tượng quan trọng nhất của nguyên lí liên tục trong rời rạc mà chúng ta sẽ trao đổi là "con ếch" và "bước nhảy".
\subsection{Một số ví dụ giải toán}
\noindent Ví dụ mở đầu là một bài toán trong lĩnh vực Hình học Tổ hợp.

\begin{vd}
Trên mặt phẳng có $100$ điểm. Chứng minh rằng tồn tại một đường thẳng sao cho mỗi nửa mặt phẳng có bờ là đường thẳng đó chứa đúng $50$ điểm trong $100$ điểm này.
\loigiai{Đầu tiên ta vẽ tất cả các đường thẳng nối cặp điểm bất kỳ trong $100$ điểm đã cho, sau đó vẽ một đường thẳng không song song với bất kỳ đường thẳng nào vừa vẽ sao cho tất cả các điểm đều nằm trên một nửa mặt phẳng bờ là đường thẳng này. Gọi đường thẳng này là $l$, và nửa mặt phẳng chứa tất cả các điểm là $P$.
	
\noindent Tiếp theo, ta di chuyển $l$ về phía $100$ điểm sao cho $l$ luôn song song với vị trí ban đầu của nó và quan sát số điểm ở nửa mặt phẳng $P$ ($P$ thay đổi mỗi khi $l$ di chuyển). Vì $l$ không song song với bất kì đường nào nối hai điểm nào trong $100$ điểm đã cho nên nó không thể đi qua hai điểm nào đó cùng một lúc. Điều này có nghĩa là trong mỗi thời điểm $l$ di chuyển, $P$ bị mất đi tối đa một điểm.

\noindent Ta tiếp tục di chuyển $l$ cho đến khi nào $P$ không còn chứa bất cứ điểm nào trong số $100$ điểm. Do ban đầu $P$ chứa đủ $100$ điểm này và $P$ bị mất tối đa một điểm trong mỗi thời điểm $l$ di chuyển nên phải tồn tại một thời điểm nào đó mà $P$ chứa đúng $50$ điểm.

\noindent{\bf Bình luận.} Trong bài toán đầu tiên này việc áp dụng nguyên lí liên tục trong rời rạc là tự nhiên, và dường như đây là con đường đơn giản nhất để chứng minh. "Con ếch" chính là một đường thẳng được chọn một cách rất tỉ mỉ để đảm bảo mỗi "bước nhảy" chỉ thay đổi tối đa một điểm. Có lẽ nhiều bạn khi bắt tay vào làm bài toán này, mặc dù có thể nhìn nhanh ra ý tưởng, nhưng thường mắc một lỗi rất cơ bản: \textit{bỏ qua việc trình bày cẩn thận về việc chọn đường thẳng!}}
\end{vd}

\begin{vd}
Ta xếp $100$ quả bóng đen và $100$ quả bóng đỏ thành hàng ngang một cách tùy ý sao cho từ trái sang phải, quả đầu và quả cuối có màu đen. Chứng minh ta có thể nhặt ra một vài quả bóng liên tiếp, nhưng không phải tất cả $200$ quả, mà trong chúng số bóng đen và số bóng đỏ bằng nhau.
	\loigiai{Theo hướng từ trái sang phải, ta đặt $S_k$ là hiệu giữa số bóng đen và số bóng đỏ trong $k$ quả đầu tiên. Từ giả thiết, ta có $S_1=1$ (hiển nhiên) và $S_{199}=-1$ (vì quả bóng cuối cùng màu đen nên trong $199$ quả đầu sẽ có $99$ bóng đen và $100$ bóng đỏ).
		
\noindent Ta nhận thấy với mọi $k$, từ $k$ sang $k+1$ hiệu giữa số bóng đen và số bóng đỏ tăng hoặc giảm $1$. Do đó tồn tại $l \in \{2,3,\dots,198\}$ để $S_t=0$, hay $l$ quả bóng đầu tiên có số bóng đen và số bóng đỏ bằng nhau. Bài toán được giải quyết.

\noindent{\bf Bình luận.} Giả thiết quả bóng đầu tiên và cuối cùng đều là màu đen thường chúng ta nghĩ đến việc xét hiệu giữa số quả bóng đen và số quả bóng đỏ, vì biểu thức này nhận giá trị lần lượt là $1$ và $-1$ tại điểm xuất phát và điểm kết thúc, đồng thời sau mỗi bước giá trị này chỉ thay đổi đúng một đơn vị.
	}
\end{vd}

\begin{vd}
Chứng minh có thể sắp xếp lại các chữ số của một số có sáu chữ số sao cho hiệu giữa tổng ba chữ số đầu tiên và ba chữ số cuối cùng nằm giữa $0$ và $9$.
	\loigiai{Gọi số đã cho là $\overline{abcdef}$, với $a, b, c, d, e, f$ là các chữ số và $a$ khác $0$, và giả sử phản chứng không thể sắp xếp lại để thỏa mãn đề bài. Đặt \[S_0:=a+b+c-d-e-f\] thì ta có $|S_0|>9$. Ta sẽ đổi chỗ một vài chữ số để có thêm giả thiết.
	
	\noindent Đầu tiên, đổi chỗ $a$ và $d$ và xét tổng \[S_1:=d+b+c-a-e-f,\] ta có \[|S_1-S_0|=|2a-2d|=2|a-d| \le 2 \cdot 9=18.\] Tiếp theo, một cách tương tự, ta đổi chỗ $b$ và $e$ để có tổng \[S_2:=d+e+c-a-b-f\] thỏa mãn $|S_2-S_1|=|2b-2e| \le 18$.
	
	\noindent Ta đổi chỗ một lần nữa, lần này là cho $c$ và $f$. Khi ấy tổng \[S_3:=d+e+f-a-b-c\] cũng thỏa mãn $|S_3-S_2|=|2c-2f| \le 18$.
	
	\noindent Bây giờ, theo giả thiết phản chứng ta có $|S_0|, |S_1|, |S_2|, |S_3|>9$, và hiệu giữa ba chữ số đầu và ba số cuối thay đổi không quá $18$ sau mõi lần đổi chỗ như trên. Vì xuất phát tại $S_0$ thỏa mãn $|S_0|>9$ và kết thúc tại $S_3=-S_0$ nên tồn tại một thời điểm mà hiệu này nằm giữa $-9$ và $9$, hay tồn tại $i \in \{1,2,3\}$ để $|S_i| \le 9$, trái với giả sử phản chứng. Ta có điều cần chứng minh.
		
		
\noindent{\bf Bình luận.} Yêu cầu của bài toán gợi cho ta việc xét hiệu giữa tổng của ba chữ số đầu và ba chữ số cuối. Có lẽ công việc khó trong bài này là thiết lập các "bước nhảy". Tuy vậy, vì cần chứng minh hiệu nằm giữa $0$ và $9$ nên ta nghĩ đến việc đổi chỗ một chữ số trong ba chữ số đầu tiên cho một chữ số khác trong ba chữ số cuối cùng. Khi đó theo lời giải trên mỗi bước hiệu phải xét thay đổi không quá $18$.

\noindent Tiếp theo chúng ta cùng đến với một bài toán kinh điển về bảng ô vuông.	}
\end{vd}

\begin{vd}
Cho bảng ô vuông $n \times n$ được điền các số nguyên sao cho hai số ở hai ô chung cạnh hơn kém nhau không quá một đơn vị. Chứng minh rằng có một số xuất hiện ít nhất $n$ lần trên bảng.

	\loigiai{ Với mỗi $i \in \{1,2,\dots,n\}$, ta gọi $M_i$ và $m_i$ lần lượt là số lớn nhất và số nhỏ nhất trên hàng thứ $i$ trên bảng, tính từ dưới lên trên. Tiếp theo. đặt $M:=\min_{\overline{1,n}}{M_i}$ và $m:=\max_{i=\overline{1,n}}{m_i}$. Có hai khả năng xảy ra.
		
		\noindent 1. $M \ge m$. Ta dễ thấy rằng $m_i \le m \le M \le M_i$ với mọi $i=\overline{1,n}$. Với mỗi $i \in \{1, 2, \dots, n\}$, trong hàng thứ $i$ ta xét các ô liên tiếp giữa $M_i$ và $m_i$.
		\begin{center}
			\begin{tabular}{c|c|c|c|c|c|c|c|}
				\cline{2-8}
			&& \multicolumn{5}{|c|}{}&\\
				\cline{2-8}
			$i$&$\dots$ &$M_i$& $\rightarrow$ &$m$& $\rightarrow$&$m_i$& $\dots$ \\
				\cline{2-8}
			&&\multicolumn{5}{|c|}{}& \\
				\cline{2-8}
			\end{tabular}
		\end{center}
		\noindent Do hiệu giữa hai ô chung cạnh không quá một đơn vị và $M_i \ge m \ge m_i$ nên trên dãy các ô liên tiếp này, tồn tại một ô ghi số $m$. Do đó, số $m$ xuất hiện ở mỗi hàng của bảng, hay xuất hiện ít nhất $n$ lần trên bảng.
		
		\noindent 2. $M<m$. Lúc này, tồn tại $i,j \in \{1, 2, \dots, n\}$ để $M=M_i$ và $m=m_i$. Rõ ràng $i, j$ phân biệt. Trên mỗi cột thứ $k$ của bảng, tính từ trái qua phải, với $k \in \{1, 2, \dots, n\}$, ta xét các ô liên tiếp giữa ô $a_{ik}$, giao của hàng $i$ và cột $k$, và ô $a_{jk}$, giao của hàng $j$ và cột $k$.
		\begin{center}
			\begin{tabular}{c|c|c|c|}
			\multicolumn{1}{c}{}& \multicolumn{3}{c}{$k$} \\
				\cline{2-4}
				& &$\vdots$& \\
				\cline{2-4}
				$i$&$\dots$&$a_{ik}$&$\dots$\\
				\cline{2-4}
				&\multirow{3}{*}{}&$\downarrow$&\\
					\cline{3-3}
					&&$M$&\\
					\cline{3-3}
					&&$\downarrow$&\\
					\cline{2-4}
				$j$&$\dots$&$a_{jk}$&$\dots$\\
					\cline{2-4}
				& &$\vdots$& \\
				\cline{2-4}
			\end{tabular}
		\end{center}
	\noindent Ta thấy, vì $M<m$ nên \[a_{ik}\le M_i=M<m=m_j \le a_{jk}.\] Mặt khác, do hiệu giữa hai ô chung cạnh không vượt quá một đơn vị nên trên dãy ô liên tiếp này, tồn tại một ô ghi số $M$. Như vậy, $M$ xuất	hiện ở tất cả các cột của bảng, hay nó xuất hiện ít nhất $n$ lần trên bảng.
}
\end{vd}
\begin{nx}
	Việc gọi ra các giá trị cực trị $M,m_i,M,m$ là một thao tác rất hay có thể áp dụng trong nhiều bài toán.
	Bảng ô vuông cũng là một chủ đề khai thác nhiều từ nguyên lí liên tục trong rời rạc. Chúng ta tiếp tục xét một ví dụ về bảng ô vuông.
\end{nx}
\begin{vd}
	Mỗi ô trong bảng $20\times 20$ được điền một ô thuộc $\{-1;0;1\}$ sao cho tổng của tất cả các số trên bảng bằng $80$. Chứng minh rằng tồn tại một hình vuông con $5\times 5$ của bảng sao cho tổng của tất cả các số trong hình vuông này có giá trị tuyệt đối không lớn hơn $5$.
	\loigiai{
		Ta chia bảng $20\times 20$ thành $16$ hình vuông con $5\times 5$ đôi một rời nhau. Do $16\cdot5=80$ nên tồn tại hai hình vuông con $B$ và $B'$ sao cho $S(B)\leq 5\leq S(B')$ (kí hiệu $S(T)$ là tổng tất cả các số trên bảng $T$).\\
		Nếu $-5\leq S(B)\leq 5$ ta có ngay điều phải chứng minh. Nếu $S(B)<-5$, ta sẽ tìm cách xây dựng một dãy các hình vuông con "kết nối" $B$ và $B'$. Cụ thể, ta xét dãy các hình vuông con $B_1$, $B_2$, $\ldots$, $B_k$ cho bởi $B_1=B$, $B_k=B'$, và với mỗi $i\in\{1,2,\ldots,k-1\}$, $B_{i+1}$ nhận được từ $B_i$ bằng cách dịch sang trái hoặc phải một cột, hoặc dịch lên trên hoặc xuống dưới một hàng (chú ý rằng ta luôn xây dựng được dãy như vậy, với $k$ không cố định).\\
		Với mỗi $i\in\{1,2,\ldots,k-1\}$, vì $B_i$ và $B_{i+1}$ có chung $20$ ô vuông đơn vị và mỗi ô được điền một số thuộc $\{-1,0,1\}$ nên
		\begin{center}
			$|S(B_i)-S(B_{i+1})|\leq 10.$
		\end{center}
		Ta có điều này đúng với mọi $i=\overline{i,k-1}$ và
		\begin{center}
			$S(B_1)=S(B)<5$, $S(B_k)=S(B')>5,$
		\end{center}
		suy ra tồn tại $i\in\{1,2,\ldots k-1\}$ để $-5\leq S(B_i)\leq 5$ hay $|S(B_i)|\leq 5$. Bài toán được giải quyết.
	}
\end{vd}
\begin{nx}
	Ở bài toán trên việc chỉ ra tồn tại hình vuông $5\times 5$ có tổng các số nhỏ hơn $5$ và lớn hơn $5$ tuy đơn giản nhưng quan trọng. Việc chia trường hợp đối với hình vuông $B$ trở nên tự nhiên.
\end{nx}
\begin{vd}
	Cho $2012$ số $a_1$, $a_2$,$\ldots$, $a_{2012}$, mỗi số bằng $1$ hoặc $-1$, thỏa mãn
	\begin{center}
		$S_i:=a_i+a_{i+1}+\cdot+a_{i+9}\ne 0\quad \forall i=\overline{i,2012},$
	\end{center}
	trong đó các chỉ số lấy theo modulo $2012$, và tổng của tất cả $2012$ số là một số nguyên dương. Tìm giá trị nhỏ nhất của tổng $2012$ số này.
	\loigiai{
		Trước tiên, ta chứng minh với môi $i,j\in\{1,2,\ldots, 2012\}$ thì $S_iS_j$ nguyên dương. Thật vậy, ta chỉ cần xét $i<j$. Giả sử phản chứng $S_iS_j<0$ (vì $S_i,S_J$ khác $0$). Không mất tính tổng quát, giả sử $S_i<0<S_j$. Theo giả thiết thì $a_k\in\{-1;1\}$, dẫn đến
		\begin{center}
			$|S_{k+1}-S_{k}|=|a_{k+10}-a_k|\leq 2\quad \forall k=\overline{i,2012}.$
		\end{center}
		Áp dụng điều này với $k=\overline{i,j}$ và chú ý rằng $S_i<0<S_j$ cùng với các số $S_k$ chẵn (tổng của $10$ số lẻ) ta suy ra tồn tại $l\in\{i,i+1,\ldots,j\}$ để $S_t=0$, trái với giả thiết.\\
		Như vậy, $S_iS_j$ với mọi $i,j=\overline{i,2012}$ kéo theo $S_1$, $S_2$,$\ldots$, $S_{2012}$ cùng dấu. Đặt $S$ là tổng của các số $a_1$, $a_2$,$\ldots$, $a_{2012}$, ta có, cũng có từ giả thiết,
		\begin{center}
			$S_1+S_2+\cdots+S_{2012}=10S>0,$
		\end{center} 
		suy ra $S_1$, $S_2$,$\ldots$, $S_{2012}$ cùng nguyên dương, mà các số này đều chẵn nên ta rút ra
		\begin{center}
			$10S=S_1+S_2+\cdots+S_{2012}\geq 2+2+\cdots+2=4024(\text{có 2012 số 2}),$
		\end{center}
		và thu được $S\geq \dfrac{4024}{10}$. Mặt khác, vì $S$ chẵn (tổng của $2012$ số lẻ) nên $S\geq 404$.\\
		Cuối cùng, ta chỉ ra một khả năng mà $S=204$, đó là dãy $(a_1,a_2,\ldots,a_{2012})$ có dạng
		\begin{center}
			$(B,B,\ldots,B,1,1)$ (có $201$ lần $B$),
		\end{center}
		trong đó $B:=(1,1,1,1,1,1,-1,-1,-1,-1)$. Vậy đáp số bài toán là $404$.
	}
\end{vd}
\begin{nx}
	Giả thiêt tổng của $10$ số liên tiếp khác $0$ gợi ý chúng ta xét tính chất của các tổng này, và nhờ nguyên lí liên tục trong rời rạc, ta đã có một chặn dưới khá chặt cho chúng. Bài toán hoàn toàn có thể đưa từ vòng tròn (có $S_{2004},S_{2005},\ldots,S_{2012}$) về đường thẳng (không có các tổng vừa liệt kê).
\end{nx}
\begin{vd}
	Cho $\epsilon$ là một số dương, $n$ là một số nguyên dương, và dãy $(x_i)_{i=1}^{2n}$, có tổng các số hạng bằng $S$, sao cho hai số hạng liên tiếp trong dãy chênh nhau không quá $\epsilon$. Chứng minh tồn tại $n$ số hạng của dãy, có tổng $T$, thỏa mãn
	\begin{center}
		$\left|T-\dfrac{S}{2}\right|\leq \dfrac{\epsilon}{2}.$
	\end{center}
	\loigiai{
		Với mỗi dãy con $I:=(i_1,i_2,\ldots,i_n)$ gồm $n$ phần tử theo thứ tự tăng dẫn của $\{1,2,\ldots,2n\}$, đặt
		\begin{center}
			$S(I):=\displaystyle\sum_{i\in I}x_i=x_{i_1}+x_{i_2}+\cdots+x_{i_n}.$
		\end{center}
		Tiếp theo, gọi hai dãy con $I:=(i_1,i_2,\ldots,i_n)$ và $J:=(j_1,j_2,\ldots,j_n)$ là \textit{liên tiếp} nếu
		\begin{center}
			$|i_1-j_1|+|i_2-j_2|+\cdots+|i_n-j_n|=1.$
		\end{center}
		Ta có, theo giả thiết thì $|S(I)-S(J)|\leq \epsilon $ với mọi dãy liên tiếp $(I,J)$. Ta xét $n^2+1$ dãy con gồm $n$ phần tử tăng dần của $\{1,2,\ldots, 2n\}$ như sau
		\begin{align*}
		I_{qn+r}:=&(1+q,2+q,\ldots,n-r+q,n-r+q+2,n-r+q+3,\ldots,n+q+1)\quad\quad \forall q,r=\overline{i,n-1},\\
		I_{n^2}:=(n+1,n+2,\ldots,2n).
		\end{align*}
		Vì mỗi số thuộc $\{0,1,\ldots,n^2-1\}$ có một cách biểu diễn duy nhất dưới dạng $qn+r$ trong đó $q,r\in\{0,1,\ldots,n-1\}$ nên định nghĩa của các dãy trên là chấp nhận được, và ngoài ra, với mọi $k=\overline{0,n^2-1},I_k$ và $I_{k+1}$ là hai dãy liên tiếp, dẫn đến
		\begin{center}
			$|S(I_k)-S(I_{k+1})\leq \epsilon\quad\quad \forall k=\overline{0,n^2-1}.$
		\end{center}
		Bây giờ, do $S(I_0)+S_(I_{n^2})=S$ nên trong hai số $S(I_0)$, $S_(I_{n^2})$ có một số không vượt quá $\dfrac{S}{2}$ và số còn lại không nhỏ hơn $\dfrac{S}{2}$. Không mất tính tổng quát, giả sử $S(I_0)\leq \dfrac{S}{2}\leq S(I_{n^2})$, khi ấy theo bất đẳng thức cuối ở trên, ta rút ta tồn tại $k\in\{0,1,\ldots,n^2-1\}$ để
		\begin{center}
			$\dfrac{S}{2}-\dfrac{\epsilon}{2}\leq S(I_k)\leq \dfrac{S}{2}+\dfrac{\epsilon}{2}.$
		\end{center}
		hay là $\left|S(I_k)-\dfrac{S}{2}\right|\leq \dfrac{\epsilon}{2}$. Ta có điều cần chứng minh.
	}
\end{vd}
\begin{nx}
	Có lẽ các bài toán sử dụng nguyên lí liên tục trong rời tác khá đơn giản trong việc tìm "con ếch" (biểu thức), tuy vậy việc xác định "bước nhảy" luôn là một công việc tương đối khó khăn. Trong bài toán này, ta có thể nghĩ ngay đến việc xét các tổng của $n$ phần tử, nhưng việc xây dựng các dãy liên tiếp một cách chặt chẽ như lời giải thì không hề đơn giản.
\end{nx}
Ngoài ta, ví dụ này có nhiều mở rộng, có thể kể đến bài toán sau: Giả sử tổng của $n$ số thực cho trước thuộc $[-1,1]$ là $S$, với $n$ nguyên dương lớn hơn $A$. Liệu có thể chọn ra một số số trong $n$ số trên sao cho tổng $T$ của chúng thỏa mãn
\begin{center}
	$\left|T-\dfrac{S}{2}\right|\leq \dfrac{1}{3}$.
\end{center}
\begin{vd}
	Cho $S$ là một bội nguyên dương của tất cả các số từ $2$ đến $2015$ và $n$ số nguyên dương $a_1$, $a_2$, $a_3$,$\ldots$, $a_n$ thuộc $M:=\{1,2,\ldots,2015\}$ có tổng bằng $2S$. Chứng minh rằng ta có thể chọn ra một vài số trong $n$ số này mà có tổng bằng $S$.
	\loigiai{
		Với mỗi $k\in M$, gọi $x_k$ là số lần xuất hiện của $k$ trong $a_1$, $a_2$,$\ldots$, $a_n$. từ giả thiết, ta có
		\begin{center}
			$x_1+2x_2+\cdots+ 2015x_{2015}=a_1+a_2+\cdots+a_n=2S.$
		\end{center} 
		Do $S$ là bội của tất cả các số từ $2$ tới $2015$ và $2013,2014,2015$ đôi một nguyên tố cùng nhau nên
		\begin{center}
			$S\geq 2013\cdot 2014\cdot 2015> 2015(1+2+\cdots+2015),$
		\end{center}
		dẫn đến 
		\begin{center}
			$x_1+2x_2+\cdots+2015x_{2015}=2S>2015(1+2+\cdots+2015),$
		\end{center}
		kéo theo tồn tại $k\in M$ để $x_k >2015$. Có hai khả năng xảy ra.
		\begin{enumerate}
			\item $kx_k\geq S$. Khi ấy, vì $k|S$ nên ta có thể lấy ra $\dfrac{S}{k}$ số $k$ từ $a_1$, $a_2$,$\ldots$, $a_n$ để có một tổng là $S$.
			\item $kx_k<S$. Đặt $B$ là tập các số trong $\{a_1,a_2,\ldots,a_n\}$ mà khác $k$. Lúc này $B$ có $n-x_k$ phần tử, và
			\begin{center}
				$T:=\displaystyle\sum_{a_i\in B}a_i=2S-kx_k>S.$
			\end{center}
		\end{enumerate}	
		Để chứng minh bài toán trong trường hợp này, ta chỉ cần chứng tỏ rằng có thể chọn một vài số trong $B$ sao cho tổng của chúng, kí hiệu là $S'$, thỏa mãn $S-2015k\leq S'\leq S$ và $k|S'$, vì khi đó có thể thêm không quá $2015$ số $k$ trong $x_k$ số bằng $k$ để có một tổng bằng $S$.
		Thật vậy, ta sẽ chứng minh nhận xét này bằng một kết quả mà lời giải sử dụng nguyên lí Dirichlet đã trở nên quen thuộc: \textit{Trong $k$ số nguyên bất kì luôn chọn được một vài số có tổng là bội của $k$}. Sử dụng kết quả này, ta thấy rằng, vì $B$ có tổng các phần từ, $T$, là một bội của $k$, nên $B$ có thể được phân hoạch các tập $B_1$, $B_2$,$\ldots$, $B_t$ sao cho $B_i$ có không quá $k$ phần tử và $k$ chia hết tổng các phần tử của $B_i$ với mọi $i=\overline{1,t}$. Như thế, với mỗi $i\in\{1,2,\ldots,t\}$, nếu đặt $s_i$ là tổng của các số thuộc $B_i$, thì ta có
		\begin{center}
			$s_1+s_2+\cdots+s_t=T>S.$
		\end{center}
		Mặt khác, vì các số $a_1$, $a_2$,$\ldots$, $a_n$ đều không lớn hơn $2015$ nên $s_i$ không vượt quá $2015k$ với mọi $i=\overline{1,t}$. Theo nguyên lí liên tục trong rời rạc, tồn tại $r\in\{1,2,\ldots,t\}$ sao cho
		\begin{center}
			$S-2015k\leq s_1+s_2+\cdots+s_r\leq S.$
		\end{center}
		Vì $k|s_1,s_2,\ldots,s_r$ nên các số cần chọn của ta là tất cả các số trong $\displaystyle\cap_{i=1}^r B_i$. Điều phải chứng minh suy ra từ đây.
	}
\end{vd}
\begin{nx}
	Một bài toán Tổ hợp khó trong một kì thi hoàn toàn có thể giải bàng các kiến thức rất đươn giản, chẳng hạn trong lời giải trên, ta đã sử dụng nguyên lí liên tục trong rời rạc cùng với một kết quả rất quen thuộc và có nhiều ứng dụng của nguyên lí Dirichlet.
\end{nx}
Ví dụ cuối cùng là một bài toán rất nhỏ, thoạt nhìn có thể không liên quan gì đến nguyên lí mà ta đã bàn tới từ lâu.
\begin{vd}
	Cho $A:=\overline{x_1x_2\ldots x_n}$ là một số nguyên dương có $n$ chữ số. Mỗi bước, ta tách $A$ thành các thành phần (giữ nguyên thứ tự các chữ số trong mỗi thành phần), cộng các thành phần đó lại để có một số mới, rồi tiếp tục làm như vậy, chẳng hạn với $A=123567$ thì
	\begin{center}
		$123567\rightarrow 123+567=690\rightarrow 6+9+0=15\rightarrow 1+5=6.$
	\end{center}
	Chứng minh rằng tồn tại một cách làm sao cho sau tối đa bốn bước, ta thu được một số có một chữ số
	\loigiai{
		Để lời giải được chặt chẽ, ta sẽ xét hai trường hợp.
		\begin{itemize}
			\item $A$ có không quá $30$ chữ số khác $0$.\\
			Đầu tiên, ta tách rời từng chữ số của $A$ rồi cộng tất cả lại để thu được số $B$ có giá trị không vượt quá $9\cdot 30=270$. Tiếp theo, ta cũng tách rời từng chữ số của $B$ rồi cộng lại để có số $C$ có giá trị không vượt quá $1+9+9=19$. Sau đó, lại tách rời từng chữ số của $C$ để nhận được số $D$ có giá trị không lớn hơn $1+9=10$. Cuối cùng, hoặc $D$ có một chữ số hoặc $D=10$ thì ta tách $D$ thành hai chữ số $1$ và $0$ để được số $1+0=1$. Rõ ràng, quá trình này diễn ra tối đa bốn bước.
		\end{itemize}
	}
\end{vd}
\begin{vd} 
	\begin{enumerate}
		\item $A$ có nhiều hơn $30$ chữ số khác $0$.\\
		Với $A=\overline{x_1x_2\ldots x_n}$, xét dãy $(x_i)_{i=1}^n$. Ta loại bỏ tất cả số $0$ trong dãy $(x_i)$ để có dãy $(y_j)_{j=1}^m$ gồm toàn các chữ số nguyên dương. Vì $A$ có nhiều hơn $30$ chữ số khác $0$ nên $m\geq 30$. Ta chia $(y_j)$ thành các dãy con, mỗi dãy có ba phần tử như sau
		$$(y_1,y_2,y_3),\ (y_4,y_5,y_6),\ldots,\ (y_{3k-2},y_{3k-1},y_{3k}),$$ trong đó $k=\left\lceil {\dfrac{m}{3}}\right\rceil $ và các số $y_{3k-1},\ y_{3k}$ có thể bằng $0$ nhưng $y_{3k-2}>0$ (tùy theo số dự của $m$ khi chia cho $3$). Vì $m> 30$ nên  $k \geq 11$. Khi đó, ta đặt 
		\begin{align*}  S&=\overline{y_1y_2y_3}+\overline{y_4y_5y_6}+\cdots +\overline{y_{3k-5}y_{3k-4}y_{3k-3}} +\overline{y_{3k-2}y_{3k-1}y_{3k}}  \\ T&=y_1+y_2+\cdots +y_{3k},\end{align*}
		Thì ta có $T$ chính là tổng các chữ số của $A$. Mặt khác, ta cũng có đánh giá sau với các chữ số $a,\ b,\ c$
		$$\overline{abc}-10(a+b+c)=9(10a-c) \geq \begin{cases} 9 \ \text{nếu}\ aneq 0 \\ -9c\ \text{nếu}\ a=0, \end{cases}$$ suy ra 
		$$\begin{aligned} S-10T & \geq \sum\limits_{i=1}^{k-1} \left[ \overline{y_{3i}y_{3i+1}y_{3i+2}}-10(y_{3i}+y_{3i+1}+y_{3i+2} \right]-9y_3k-2 \\ & \geq 9(k-1)-9y_{3k-2} \geq 9(11-1)-9\cdots 9 =9>0, \end{aligned} $$ và ta có $S>10T$. Bây giờ, với mỗi $ i \in \{0,\ 1,\ldots,\ k \}$, đặt $S_i$ là tổng nhận được từ $S$ bằng cách tách rời các số hạng 
		$$\overline{y_1y_2y_3},\ \overline{y_4y_5y_6},\ldots,\ \overline{y_{3i-2}y_{3i-1}y_{3i}}$$ thành các chữ số và giữ nguyên các số hạng còn lại (với cách đặt này ta suy ước $\overline{y_{3k-2}y_{3k-1}y_{3k}}=\overline{y_{3k}y_{3k-1}y_{3k-2}}$). Ta dễ thấy $S_0=S$ và $S_k=T$, suy ra $S_0>10S_k$. Điều này dẫn đến tồn tại $s$ nguyên dương để $S_0\geq 10^s>S_k$, và ta có thể lất $s\geq 3$ do $S_0$ có ít nhất bốn chữ số. Vì 
		$$\left| S_{i+1}-S_i\right|=\left| \overline{y_{3i+1}y_{3i+2}y_{3i+3}}-y_{3i+1}-y_{3i+2}-y_{3i+3} \right|<999\ \forall i=\overline{0,\ k-1},$$ nên theo nguyên lí liên tục rời rạc, tồn tại $j\in \{0,\ 1,\ldots, k-1\}$ để $10^s\leq S_j \leq 10^s+999$. Như thế, ta sẽ chỉ ra một cách làm thỏa mãn bài toán. \\
		Thật vậy, đầu tiên, ta tách $A$ thành các số có ba chữ số và các chữ số để nhận được chính $S_j$. Tiếp theo, ta tách $S_j$ thành các chữ số để có số $B$ có giá trị không vượt quá $1+9+9+9=28$, vì $10^s\leq S_j \leq 10^s+999.$ Sau đó, tiếp tục tách $B$ thành các chữ số để thu được số $C$ có giá trị không vượt quá $2+8=1+9=10.$ Cuối cùng ta giữ nguyên $C$, nếu $C$ có một chữ số, hoặc tách $C$ thành $1$ và $0$, nếu $C=10$.
	\end{enumerate}
\noindent	Như vậy, trong mọi trường hợp ta có thể nhận được số có một chữ số từ $A$ sau không quá bốn bước. Bài toán được giải quyết trọn vẹn.
\end{vd} 

\noindent{\bf Bình luận.} Bài toán này cho ta thấy đối khi cả việc xác định “con ếch” và “bước nhảy” đều khó. Khi bắt tay vào làm bài toán này, ta cần phải nghĩ đến thao tác đơn giản nhất là tách rời các chữ số của số ban đâu ra, và đây cũng chính là cách giảm giá trị của số $A$ nhanh nhất. Tuy nhiên, nếu số đã cho quá lớn thì cách này không thể áp dụng chỉ với bốn bước được. Hơn nữa, ta cũng có nhận định rằng trong bốn bước luôn phải có hai hoặc ba bước sử dụng thao tác đó để nhận được kết quả là số có một chữ số. Do vậy, mục tiêu của ta sẽ là đưa về một số có tổng các chữ số đủ nhoe sau bước đầu tiên. Việc nghĩ đến số có dạng $10^k+a$, trong đó $a$ là một số đủ nhỏ, trở nên tự nhiên, và cũng với suy luận này, ta có thể thay bốn bước thành ba bước.	


\subsection{Bài tập}
\begin{bt}
	Một bảng $8 \times 8$ có các ô vuông được điền một trong hai số $1$, $-1$ sao cho tổng tất cả các số trên bảng bằng $0$. Chứng minh rằng có thể chia bảng thành hai thành phân sao cho tổng của các số trên mỗi thành phần đều bằng $0$.\\ 
	\noindent{\bf Gợi ý.} Trong bảng luôn có ít nhất hai số $1$. Hãy xét dãy các ô kề nhau nối hai ô chứa số $1$ này sao cho dãy này đi qua tất cả các ô trên bảng.
\end{bt}
\begin{bt}
	Các mặt của tám khối lập phương đơn vị được tô màu trắng và đen sao cho số mặt được tô trắng và đen bằng nhau. Chứng minh rằng tồn tại cách ghép tám khối này thành hình lập phương $2\times 2\times 2$ sao cho số mặt trắng và đen trên bề mặt của mỗi khối lập phương lớn này bằng nhau.\\
	\noindent{\bf Gợi ý.} Xét một cách sắp xếp tám khối đơn vị này thành khối $2\times 2\times 2$
	. Mỗi bước ta xoay một khối đơn vị sao cho vẫn có hai mặt cũ của nói nằm trên mặt của khối lập phương lớn và mặt còn lại được thay bởi mặt chưa được nằm ra ngoài.
	
\end{bt}
\begin{bt}
	Cho bảng vuông $n\times n$ được điền $n^2$ số nguyên đôi một khác nhau, với $n$ nguyên dương lớn hơn $1$. Chứng minh rằng tồn tại hai ô chung cạnh được điền các số $x,\ y$ sao cho hai số này chênh nhau ít nhất $n$.\\
	\noindent{\bf Gợi ý.}
	Lập luận tương tự Ví dụ 26.4
\end{bt}
\begin{bt}
	Cho dãy $\{a_n\}_{n\geq 1}$ xác định bởi $$a_1=1,\ a_{n+1}-a_n \in \{0,1\}\ \forall n\in \mathbb{N}.$$
	Chứng minh rằng nếu tồn tại $n$ nguyên dương để $a_n=\dfrac{n}{1000}$ thì tồn tại $m$ nguyên dương để $a_m=\dfrac{m}{500}.$\\
	\noindent{\bf Gợi ý.}
	Hãy xét hàm $f:\mathbb{N} \to \mathbb{R}$ thỏa mãn $f(k)=500a_k-k$ với mọi $k \in \mathbb{N}.$
\end{bt}
\begin{bt}
	Cho $\varepsilon $  là một số dương, $n$ là một số nguyên dương, và dãy $(x_i)_{i=1}^n$ gồm $n$ số thực dương thỏa mãn hai số liên tiếp trong dãy chênh nhau không quá $\varepsilon$. Chứng minh rằng với mọi $k=\overline{1,n-1}$, ta có thể chọn ra $k$ số hạng trong dãy sao cho tổng $T$ của chúng thỏa mãn $$\left|T-\dfrac{kS}{n} \right| \leq \dfrac{\varepsilon}{2},$$ trong đó $S$ là tổng của $x_1,\ x_2,\ldots,\ x_n.$\\ 
	\noindent{\bf Gợi ý.}
	Đây là một mở rộng của Ví dụ 26.7. Hãy xét $S(I)=\sum\limits_{i\in I} x_i$ với mỗi tập con $I$ có $k$ phần tử của $\{1,\ 2,\ldots,\ n\}.$ 
\end{bt}

