\section{Số hoàn hảo và ứng dụng}
\begin{center}\textbf{\color{violet}{Nguyễn Cửu Huy, Nguyễn Đình Minh-Trường THPT Chuyên Lê Quý Đôn Đà Nẵng}}\end{center}
\noindent Một bài toán trong kì thi học sinh giỏi quốc gia trung học phổ thông Toán năm $2016$ (Bài 7) đã đề cập đến một vấn đề khá kinh điển trong số học, đó là số hoàn hảo (hay còn gọi là số hoàn chỉnh), một chủ đề bị lãng quên lại được chọn trong đề thi năm nay. Để giải bài toán này, ngoài các định lí đã biết về số hoàn hảo, thí sinh còn phải biết vận dụng tính chất nhân tính của hàm $\sigma (n)$ (hàm tổng các ước số của $n$) là có thể giải quyết được. Nhân bài toán nêu trên, chúng tôi xin giới thiệu với bạn đọc làm quen một số tính chất của số hoàn hảo cùng các ví dụ minh họa.\\
Ta đã biết tồn tại vô hạn số tự nhiên $n$ mà tổng các ước số (dương) của $n$ (không tính $n$) là nhỏ hơn $n$. Chẳng hạn các số như vậy là các số nguyên tố và lũy thừa của chúng. Cũng tồn tại vô hạn các số tự nhiên $n$ mà tổng tương ứng lớn hơn $n$. Ví dụ các số có dạng $2^k\cdot 3$, với $k=2$, $3,\ldots$ Tuy nhiên ta chưa biết có tồn tại vô hạn các số tự nhiên $n$ mà tổng các ước số của $n$ (không tính $n$) bằng $n$ hay không. Các số có tính chất này được gọi là các số hoàn hảo. Chẳng hạn
$$6=1+2+3, 28=1+2+4+7+14, 56=1+2+4+7+14+28.$$
Tổng các ước số của $n$ được kí hiệu là $\sigma (n)$. Do đó một số tự nhiên là hoàn hảo  khi và chỉ khi $\sigma (n) = 2n$.

\subsection{Một số tính chất của số hoàn hảo}

\begin{dl}[Euclide-Euler]
Số nguyên dương chẵn $n$ là số hoàn hảo nếu và chỉ nếu $$n=2^{m-1}(2^m-1),$$
trong đó $m$ là số nguyên dương sao cho $2^m-1$ là số nguyên tố
\end{dl}

\begin{dl}[Euler]
Nếu $n$ là số hoàn hảo lẻ thì $n$ phải có dạng $n=p^{4s+1}m^2$, với $p$ là số nguyên tố dạng $4k+1$ và $m$ là số nguyên dương không chia hết cho $p$.
\end{dl}
\begin{dl}[Cataldi-Fermat]
	Nếu $2^m-1$ là số nguyên tố thì $m$ là số nguyên tố.
\end{dl}

\begin{dl}
	Nếu $n=p_1^{\alpha _1}p_2^{\alpha _2}\ldots p_k^{\alpha _k}=\displaystyle\prod\limits_{i=1}^k=p_i^{\alpha_i}$ là phép phân tích nhân tử của $n$ thành các số nguyên tố thì 
	$$\sigma (n)=\displaystyle\prod\limits_{i=1}^k(1+p_i+p_i^2+\cdots+p_i^{\alpha_i})=\displaystyle\prod\limits_{i=1}^k \dfrac{p_i^{\alpha_i+1}-1}{p_i-1}.$$
\end{dl}

\begin{dl}[Cataldi-Fermat]
	Nếu $n$ là một số hoàn hảo lẻ, thì $n=p^{\alpha}q_1^{2\beta_1}q_2^{2\beta_2}\cdots q_r^{2\beta_r}$, với $\alpha$, $\beta_r\in \mathbb{Z}^+$; $p$, $q_1,\ldots,$ $q_r$ là các số nguyên tố lẻ phân biệt và $p\equiv \alpha\equiv 1$ $\left(\mathrm{mod} \text{ }4\right)$
\end{dl}

\begin{hq}
	Mọi số hoàn hảo chẵn cho bởi công thức $2^{p-1}(2^p-1)$, với $p$ và $2^p-1$ là các số nguyên tố.
\end{hq}

\begin{hq}
	Nếu $n$ là số hoàn hảo thì $\displaystyle\sum\limits_{d|n}\dfrac{1}{d}=2$, trong đó $d$ là các ước dương của $n$ không kể $1$ và chính $n$.
\end{hq}
Từ định lí $1$ suy ra việc tìm tất cả các số hoàn hảo chẵn tương đương với việc tìm tất cả các số \textit{Mersenne} (là các số nguyên tố có dạng $M_n=2^n-1, n\in \mathbb{N}, n\ge 1$). Các định lí và hệ quả trên có thể chứng minh khá ngắn gọn dựa vào định nghĩa số hoàn hảo, định lí cơ bản của số học và các tính chất của hàm $\sigma (n)$.\\
Tính đến nay người ta đã tìm ra được $48$ số hoàn hảo, tất cả chúng đều là số chẵn và vẫn chưa biết có tồn tại số hoàn hảo lẻ hay không. Năm $1993$, R. P. Brent, G. L. Cohen và H. J. J. teRiele trong bài báo của mình đã chúng minh được rằng nếu tồn tại các số hoàn hảo lẻ $n$, thì nó phải là $n>10^{300}$. Dưới đây là một số ví dụ khai thác từ các tính chất của số hoàn hảo nêu trên. 

\subsection{Các ví dụ}

\begin{vd}
	Chứng minh rằng nếu $n$ là một số hoàn hảo chẵn thì số $8n+1$ là số chính phương.
\loigiai{
	Vì $n$ là số hoàn hảo chẵn, nên ta có $n=2^{k-1}M_k=\dfrac{2^k}{2}(2^k-1)=\dfrac{m(m+1)}{2}$, trong đó $m=2^k-1$. Khi đó
	$$8n+1=4m(m+1)+1=(2m+1)^2.$$
} 
\end{vd}

\begin{vd}
	Chứng minh rằng mọi số hoàn hảo lẻ có ít nhất ba nhân tử nguyên tố phân biệt
	\loigiai{
		Giả sử tồn tại một số hoàn hảo lẻ $n$ mà không có ít nhất ba nhân tử nguyên tố phân biệt. Trong trường hợp này $n$ hoặc có dạng $n=p^k$, với $p$ là số nguyên tố ($p\ge 3$) và $k$ là một số nguyên dương; hoặc có dạng $n=p_1^{k_1}p_2^{k_2}$ với $p_1$, $p_2$ là các số nguyên tố ($3\le p_1\le p_2$) và $k_1$, $k_2$ là các số nguyên dương.
		Do đó, nếu $n=p^k$ thì 
		$$\sigma (n)=1+p+p^2+\cdots+p^k.$$
		Bằng quy nạp, dễ dạng chứng minh được $$1+p+p^2+\cdots+p^k<2p^k=2n.$$
		Từ đây suy ra $\sigma (n)<2n$, vô lí vì theo giả thiết $n$ là một số hoàn hảo.
		Nếu $n=p_1^{k_1}p_2^{k_2}$ ta có 
		$$\sigma (n)=\sigma(p_1^{k_1}p_2^{k_2})=\sigma(p_1^{k_1})\sigma(p_2^{k_2}),$$ vì $p_1^{k_1}$, $p_2^{k_2}$ là các số nguyên dương nguyên tố cùng nhau. Khi đó
		{\allowdisplaybreaks
		\begin{eqnarray*}
			\sigma (n)&=&(1+p_1+p_1^2+\cdots+p_1^{k_1})(1+p_2+p_2^2+\cdots+p_2^{k_2})\\
			&=&p_1^{k_1}\left(1+\dfrac{1}{p_1}+\cdots+\dfrac{1}{p_1^{k_1}}\right)p_2^{k_2}\left(1+\dfrac{1}{p_2}+\dfrac{1}{p_2^2}+\dfrac{1}{p_2^{k_2}}\right)\\
			&<&p_1^{k_1}p_2^{k_2}\cdot \displaystyle\sum\limits_{m=0}^{\infty}\dfrac{1}{p_1^m}\cdot \displaystyle\sum\limits_{m=0}^{\infty}\dfrac{1}{p_2^m}=p_1^{k_1}p_2^{k_2}\cdot \dfrac{1}{1-\dfrac{1}{p_1}}\cdot \dfrac{1}{1-\dfrac{1}{p_2}}\\
			&\le &p_1^{k_1}p_2^{k_2}\cdot \dfrac{1}{1-\dfrac{1}{3}}\cdot \dfrac{1}{1-\dfrac{1}{5}}=\dfrac{15}{8}p_1^{k_1}p_2^{k_2}<2p_1^{k_1}p_2^{k_2}=2n.
		\end{eqnarray*}}Do đó $\sigma (n)<2n$, vô lí vì $n$ là một số hoàn hảo.
	} 
\end{vd}

\begin{vd}
	Cho $a$, $n$ là các số nguyên dương sao cho $a^n$ là một số hoàn hảo. Chứng minh rằng $a^{\frac{n}{\mu}}>\dfrac{\mu}{2}$, trong đó $\mu$ kí hiệu là số các ước nguyên tố phân biệt của $a^n$.
	\loigiai{
		Ta đã biết rằng với mọi số hoàn hảo $m$ thì đều có $\displaystyle\sum\limits_{d|n}\dfrac{1}{d}=2$. Do đó, ta có $\displaystyle\sum\limits_{d|a^n}\dfrac{1}{d}=2$.\\
		Giả sử $a^n=p_1^{k_1}p_2^{k_2}\cdots p_{\mu}^{k_{\mu}}$ là phân tích nguyên tố duy nhất của số $a^n$. Rõ ràng là
	\[\dfrac{1}{p_1^{k_1}}+\dfrac{1}{p_2^{k_2}}+\cdots+\dfrac{1}{p_{\mu}^{k_{\mu}}}<2.\tag{1}\]
Theo bất đẳng thức trung bình nhân - trung bình điều hòa suy ra được
{\allowdisplaybreaks
	\begin{align*}
	&\sqrt[\mu]{p_1^{k_1}p_2^{k_2}\cdots p_{\mu}^{k_{\mu}}}\ge \dfrac{\mu}{\dfrac{1}{p_1^{k_1}}+\dfrac{1}{p_2^{k_2}}+\cdots+\dfrac{1}{p_{\mu}^{k_{\mu}}}}\\ \Leftrightarrow&\dfrac{1}{p_1^{k_1}}+\dfrac{1}{p_2^{k_2}}+\cdots+\dfrac{1}{p_{\mu}^{k_{\mu}}}\ge \dfrac{\mu}{\sqrt[\mu]{p_1^{k_1}p_2^{k_2}\cdots p_{\mu}^{k_{\mu}}}}
		\end{align*}}Do đó $\dfrac{1}{p_1^{k_1}}+\dfrac{1}{p_2^{k_2}}+\dfrac{1}{p_{\mu}^{k_{\mu}}}\ge \dfrac{\mu}{a^{\frac{n}{\mu}}}$\hfill(2)\\
		\noindent
		Từ (1) và (2) suy ra $2>\dfrac{\mu}{a^{\frac{n}{\mu}}}$ hay $a^{\dfrac{n}{\mu}}>\dfrac{\mu}{2}.$
	} 
\end{vd}

\begin{vd}
	Cho $n$ là một số hoàn hảo. Chứng minh rằng
	\begin{enumerate}
		\item Nếu số hoàn hảo lớn hơn $6$ chia hết cho $3$, thì nó cũng chia hết cho $9$.
		\item Nếu số hoàn hảo lớn hơn $28$ chia hết cho $7$, thì nó cũng chia hết cho $49$.
	\end{enumerate}
	\loigiai{
		Với $n$ là số nguyên dương, kí hiệu $\sigma (n)$ là tổng của tất cả các ước dương của $n$. Vì $\sigma $ là hàm nhân tính, nên nếu $a$ và $b$ là nguyên tố cùng nhau, thì $\sigma (ab)=\sigma (a)\sigma (b)$. Để ý rằng $n$ là số hoàn hảo nếu và chỉ nếu $\sigma (n)=2n$, $\sigma (n)\ge n$ và dấu đẳng thức xảy ra khi và chỉ khi $n=1$.\\
		Giả sử $p\in \{3,7\}$ và $n$ là số hoàn hảo chia hết cho $p$ nhưng không chia hết cho $p^2$. Ta viết $n=2^apm$ với các số nguyên $a$ và $m$ sao cho $a\ge 0$ và ƯCLN$(m,2p)=1$. Khi đó
		$$2^{a+1}pm=2n=\sigma (n)=\sigma(2^a)\sigma(p)\sigma(m)=(2^{a+1}-1)(p+1)\sigma(m).$$ 
		Bởi vì $p+1$ là một lũy thừa của $2$, ta có $2^{a+1}\ge p+1$. Do đó
		\begin{eqnarray*}
			2^{a+1}pm&=&(2^{a+1}-1)(p+1)\sigma(m)\ge \left(2^{a+1}\cdot \left(1-\dfrac{1}{2^{a+1}}\right)\right)(p+1)m\\
			&\ge& 2^{a+1}\left(1-\dfrac{1}{p+1}\right)(p+1)m=2^{a+1}pm
		\end{eqnarray*}
		trong đó đẳng thức xảy ra nếu và chỉ nếu $\sigma(m)=m$ (tức là $m=1$) và $2^{a+1}=p+1$. Nếu $p=3$, thì ta tìm được $(m,a)=(1,1)$ và $n=2^1\cdot 3\cdot 1=6$. Nếu $p=7$, thì ta tìm được $(m,a)=(1,2)$ và $n=2^2\cdot 7\cdot 1=28$. Do đó, nếu số hoàn hảo lớn $6$ (tương ứng $28$) mà chia hết cho $3$ (tương ứng $7$) thì nó cũng chia hết cho $9$ (tương ứng $49$).
 	} 
\end{vd}
\begin{vd}
	Một số nguyên được gọi là bình phương - tự do nếu nó không chia hết cho một bình phương của bất kì số nguyên tố.
	\begin{enumerate}[a)]
		\item Tìm tất cả các số nguyên bình phương tự do mà là số hoàn hảo.
		\item Chứng minh rằng không có số chính phương là số hoàn hảo.
	\end{enumerate}
	\loigiai{
	Để ý rằng nếu $n=p_1^{\alpha_1}p_2^{\alpha_2}\cdots p_k^{\alpha_k}$, thì tổng các ước dương của $n$ là $\sigma(n)=\prod\limits_{i=1}^k\left(\sum\limits_{j=0}^{\alpha_i}p_i^j\right)$, trong đó $p_1<p_2<\cdots<p_k$ là các số nguyên tố và $\alpha_1$,$\alpha_2$,\ldots,$\alpha_k$ là các số nguyên dương.
	\begin{enumerate}[a)]
		\item Giả sử $n$ là một số hoàn hảo bình phương - tự do. Trong trường hợp này, $n=p_1p_2\cdots p_k$ với các số nguyên tố nào đó $p_1<p_2<\cdots<p_k$ và $2p_1p_2\cdots p_k=(p_1+1)(p_2+1)\cdots(p_k+1)$.\\
		- Nếu $p_1\ne 2$ thì $p_1+1$, $p_2+1$,\ldots,$p_k+1$ đều là các số chẵn, trong khi $p_1p_2\cdots p_k$ là một số lẻ. Ta kết luận $k=1$ và $2p_1=p_1+1$, điều này không thể.\\
		- Nếu $p_1=2$ thì $p_1+1=3=p_2$ và nếu $k>2$, ta có $p_3p_4\cdots p_k=(p_3+1)(p_4+1)\cdots(p_k+1)$. Điều này lại không thể xảy ra vì cả hai vế có tính chẵn lẻ khác nhau. Do đó $k=2$ và $n=6$. Vậy chỉ có duy nhất số hoàn hảo bình phương - tự do là $6$.
		\item Giả sử $n$ là một số chính phương. Khi đó tồn tại các số nguyên tố $p_1<p_2<\cdots<p_k$ và các số nguyên dương $\alpha_1$, $\alpha_2$, \ldots, $\alpha_k$ sao cho $n=p_1^{2\alpha_1}p_2^{2\alpha_2}\cdots p_k^{2\alpha_k}$.\\
		Bởi vì $\sum\limits_{j=0}^{2\alpha_i}p_i^j$ là một số lẻ, với $i=1,2,\ldots,k$, nên tổng $\sigma(n)$ các ước dương của $n$ là số lẻ trong khi $2n$ là số chẵn. Khi đó $n$ không thể là một số hoàn hảo.
	\end{enumerate}

}
\end{vd}
\begin{vd}
	Cho $p$ và $q$ là các số nguyên tố khác nhau.
	\begin{enumerate}[a)]
		\item Tìm các số hoàn hảo nếu biết dạng phân tích tiêu chuẩn của nó là một trong các dạng sau:
		\[n=pq;\: n=p^2q.\]
		\item Chứng minh rằng không tồn tại số hoàn hảo mà phân tích tiêu chuẩn của nó là một trong các dạng sau: $n=p^{\alpha}$; $n=p^3q$.
	\end{enumerate}
	\loigiai{
		\begin{enumerate}[a)]
			\item 
			\begin{itemize}
				\item Với $n=pq$ ta có $\sigma(n)=(p+1)(q+1)=2pq$ nên suy ra $(p-1)(q-1)=2$, từ đó ta có $n=6$.
				\item Với $n=p^2q$ ta có $\sigma(n)=(p^2+p+1)(q+1)=2p^2q$ nên suy ra $(q-1)(p^2-p-1)=2(p+1)$. Nhưng ta thấy ƯCLN$(p+1,p^2-p-1)=1$ cho nên $p^2-p-1=1$ hoặc $p^2-p-1=2$. Nếu $p^2-p-1=1$ thì $p=2$, khi đó $q=7$, do đó $n=2^2\cdot 7=28$. Rõ ràng $n=28$ là một số hoàn hảo. Nếu $p^2-p-1=2$ thì $p$ là ước của $3$, nhưng $3$ không là nghiệm của phương trình $p^2-p-3=0$. Vậy chỉ có $n=28$.
			\end{itemize}
			
			\item Ta chứng minh bằng phản chứng.
			\begin{itemize}
				\item Với $n=p^{\alpha}$. Giả sử $n=p^{\alpha}$ là một số hoàn hảo thì $\sigma(n)=2n$, thế thì $\dfrac{p^{\alpha+1}-1}{p-1}=2p^{\alpha}$, suy ra $p^{\alpha+1}-p^{\alpha}=p^{\alpha}-1$. Đẳng thức này không thể xảy ra với $p$ là số nguyên tố, bởi vì $p\geq 2$ ta có $p-1\geq 1$ cho nên $p^{\alpha+1}-p^{\alpha}=p^{\alpha}(p-1)\geq p^{\alpha}>p^{\alpha}-1$.
				\item Với $n=p^3q$. Giả sử $n=p^3q$ là một số hoàn hảo thì $(p^3+p^2+p+1)(q+1)=2p^3q$, suy ra $(p^3-p^2-p-1)(q-1)=2(p^2+p+1)$. Nhưng  ƯCLN$(p^3-p^2-p-1,p^2+p+1)=1$ nên hoặc $p^3-p^2-p-1=1$ hoặc $p^3-p^2-p-1=2$, nghĩa là $p^3-p^2-p-2=0$ hoặc $p^3-p^2-p-3=0$. Phương trình $p^3-p^2-p-2=0$\quad$(1)$ có nghiệm nguyên $p$ thì $p|2$. Do $p$ là số nguyên tố nên ta có $p=2$. Với $p=2$ (là nghiệm cả $(1)$) suy ra $q=15$. Khi đó $n=2^3\cdot 15=120$, không là số hoàn hảo. Dễ thấy phương trình $p^3-p^2-p-3=0$ cũng không có nghiệm nguyên tố. Do đó không thể có các số hoàn hảo dạng $n=p^3q$.
			\end{itemize}
		\end{enumerate}}
\end{vd}
\begin{vd}
	Chứng minh rằng nếu $n=2^{m-1}(2^m-1)$ là một số hoàn hảo chẵn, thì \[n=1^3+3^3+\cdots+\left(2^{\frac{m+1}{2}}-1\right)^3.\]
	\loigiai{
	Bằng quy nạp ta có thể chứng minh được tổng $\sum\limits_{i=1}^mi^3=\dfrac{m^2(m+1)^2}{4}$. Giả sử $k=2^{\frac{m-1}{2}}$ , thế thì ta có 
	\begin{eqnarray*}
	1^3+3^3+\cdots+(2k-1)^3&=&(1^3+2^3+\cdots +(2k)^3)-(2^3+4^3+\cdots+(2k)^3)\\
	&=&\dfrac{(2k)^2(2k+1)^2}{4}-2^3\dfrac{k^2(k+1)^2}{4}\\
	&=&k^2(2k+1)^2-2k^2(k+1)^2\\
	&=&k^2(4k^2+4k+1-2k^2-4k-2)=k^2(2k^2-1).
	\end{eqnarray*}
	Thay giá trị của $k$ vào đẳng thức trên ta được điều phải chứng minh.}
\end{vd}

\subsection{Các bài toán dành cho bạn đọc}

\begin{bt}
	Một số $n$ được gọi là số \textit{tam giác}  nếu tồn tại số $k\in\mathbb{N}$ sao cho $n=\dfrac{k(k+1)}{2}$. Chứng minh rằng mọi số hoàn hảo chẵn là số tam giác.
\end{bt}

\begin{bt}
	Tìm tất cả các số tự nhiên $n$ có tính chất $n$ và $\sigma(\sigma(n))$ là các số hoàn hảo, hoặc ngược lại chứng tỏ không tồn tại số $n$ như thế.
\end{bt}

\begin{bt}
	Chứng tỏ rằng một số hoàn hảo có $k$ nhân tử nguyên tố phân biệt thì có ít nhất một nhân tử nguyên tố không vượt quá $k$.
\end{bt}

\begin{bt}
	Giả sử $q_1$, \ldots, $q_k$ là các số nguyên tố phân biệt. Chứng minh rằng 
	$$\dfrac{(q_1+1)(q_2+1)\cdot(q_k+1)}{q_1q_2\cdots q_k}\leq 2\leq \dfrac{q_1q_2\cdots q_k}{(q_1-1)(q_2-1)\cdots(q_k-1)}$$
	là điều kiện cần để $n=\prod\limits_{i=1}^kq_i^{\alpha_i}$ là một số hoàn hảo.
\end{bt}

\begin{bt}
	\begin{enumerate}[a)]
		\item Chứng minh rằng nếu $p$ là số nguyên tố lẻ, thì lũy thừa $p^k$ không là số hoàn hảo.
		Chứng minh rằng số có dạng $3^i\cdot 5^j$ không là số hoàn hảo.
	\end{enumerate}
\end{bt}

\begin{bt}
	Chứng minh rằng nếu $n=q^e a_1^2 a_2^2\cdots a_n^2$, với $q$, $a_i$ là các số nguyên tố phân biệt, $q,e\equiv 1(\bmod 4)$ và nếu $3$ chia hết $n$, thì $n$ không là số hoàn hảo lẻ.
\end{bt}

